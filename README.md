Настало время для нового финального задания по bash!
Ваша задача написать скрипт мониторинга ресурсов сервера.
Надеюсь вы знаете, что для работы приложений на выделенном сервере в реальной жизни максимально важны 4 параметра:

процессор (cpu)
память (memory)
работа с дисками (io operations)
cеть (network)
Ни для кого не секрет, что на данный момент существуют достаточно мощные системы мониторинга, позволяющие максимально качественно собирать информацию о доступных ресурсах и их использовании.
Например, стандартный node_exporter системы мониторинга Prometheus собирает более 100 метрик с сервера, на котором установлен.
Но! Давайте окунемся в прошлое и предположим, что у вас таких систем нет, а задача мониторить все и вся есть! =) По этому, выявив наиболее важные для мониторинга ресурсы (про которые я упомянул выше), вы решили написать скрипт, позволяющий выполнить вашу задачу. А поможет вам в этом bash!

Приступайте!

Помните, что ваш скрипт должен обладать конкретными свойствами и ограничениями, которые я опишу в техническом задании (все мы знаем про техническое задание и про то, что его нужно соблюдать).

Тех. задание:
Ваш скрипт должен иметь подсистему обработки входных аргументов. Работа скрипта организуется относительно полученных аргументов. Если аргументов нет - должен выводится help, показывающий предназначение скрипта и основные команды с назначением и примерами. То же самое должно выводиться на команду -h или --help для вашего скрипта (да, будем называть аргументы вашего скрипта командами).
Обработка входных аргументов должна строиться на прохождении по всем входным аргументам и сравнении их с эталоном. Срабатывать должны только те команды, которые поступили на вход скрипту, остальные использоваться не должны (если отрабатывают команды, которых не было на входе - сразу -10 баллов, это считается грубой ошибкой)
Список команд (каждая команда имеет 2 названия: короткое и длинное. Короткое начинается с - длинное с --. Также разрешается описывать работу команд отдельными функциями):
-p, --proc - работа с директорией /proc
-c, --cpu - работа с процессором
-m, --memory - работа с памятью
-d, --disks - работа с дисками
-n, --network - работа с сетью
-la, --loadaverage - вывод средней нагрузки на систему
-k, --kill - отправка сигналов процессам (простой аналог утилиты kill)
-o, --output - сохранение результатов работы скрипта на диск
-h, --help - вывод предназначения скрипта, помощи для верного запуска и описания всех команд с примерами
Описание дополнительных параметров команд: Здесь мы даем вам волю! Можете дополнить функционал команд как угодно!
Главное, чтобы:
было наличие команды
команды были наделены правильными свойствами (для -m все что связано с памятью, для -n - c сетью и так далее).
Пример1:
-p, --proc --> работа с директорией /proc

а) без доп. параметров --> выводит листинг директории /proc
б) -p , --proc --> выводит содержимое указанного файла из директории /proc

Пример использования: -p cpuinfo --> cat /proc/cpuinfo

Пример2:
-m, --memory --> работа с памятью

а) без доп. параметров выводят текущее состояние по памяти
-m, --memory --> free
б) -m , --memory --> выводит содержимое указанного параметра памяти

-m total, --memory total --> total - всего доступно физической памяти на сервере

вывод: 2040892

-m available, --memory available --> available - памяти доступно к использованию

вывод: 1083352

Чем больше вы погрузитесь в тему, тем лучше для вас. Считайте утилизацию сети, смотрите среднюю нагрузку на процессор со стороны пользователя, считайте iops при работе с дисками и не забывайте, что ваши знания по этим темам могут однажды пригодиться вам при решении достаточно трудных возникающих задач в работе.

В скрипте обязательно должны использоваться конструкции if, for, foreach и case (каждая не менее 1 раза).
Разрешено работать с флагами и переменными (в том числе с переменными окружения, но если вы их используете, указывайте от этом в отчете).
Должна проводиться проверка вводимых параметров на правильность. Если в скрипте используются пути к утилитам, директориям и файлам, должна проводиться дополнительная проверка на их существование.
В скрипте должна использоваться как минимум одна собственноручно написанная функция.
В скрипте разрешено использование утилит из пакета sysstat и предустановленных утилит (например: free, lsblk, w etc.).
Вы должны описать то, как вы будете мониторить ресурсы вашей системы (опишите, как вы будете запускать и использовать свой скрипт). Для запуска скрипта разрешено использовать cron.
